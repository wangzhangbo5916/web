# ReactåŸºç¡€çŸ¥è¯†

## å¸¸è§é—®é¢˜

### ä¸ºä»€ä¹ˆä¸èƒ½åœ¨å¾ªç¯å†…éƒ¨ã€æ¡ä»¶è¯­å¥å’ŒåµŒå¥—æ–¹æ³•ä¸­è°ƒç”¨React Hooksï¼Ÿ

React Hooks é€šè¿‡æ•°ç»„æŒ‡é’ˆæ¥ç»´æŠ¤ setter å’Œ state çš„å¯¹åº”å…³ç³»ï¼Œå¦‚æœï¼Œåœ¨æ¸²æŸ“æ—¶æ”¹å˜äº†è°ƒç”¨é¡ºåºï¼ŒæŒ‡é’ˆå°±ä¸èƒ½æ­£ç¡®çš„åŒ¹é… setter å’Œ stateã€‚å…·ä½“æ¥è¯´ï¼š

- ç¡®ä¿è°ƒç”¨é¡ºåºä¸€è‡´ï¼šHooks çš„è°ƒç”¨é¡ºåºåœ¨æ¯æ¬¡æ¸²æŸ“ä¸­å¿…é¡»ä¿æŒä¸€è‡´ï¼Œä»¥ä¾¿ React æ­£ç¡®åœ°ç®¡ç†çŠ¶æ€å’Œå‰¯ä½œç”¨ã€‚
- é¿å…ä¸ä¸€è‡´çš„çŠ¶æ€ç®¡ç†ï¼šåœ¨å¾ªç¯ã€æ¡ä»¶è¯­å¥æˆ–åµŒå¥—å‡½æ•°ä¸­è°ƒç”¨ Hooks å¯èƒ½å¯¼è‡´ä¸åŒçš„æ¸²æŸ“å‘¨æœŸä¸­è°ƒç”¨çš„ Hook æ•°é‡ä¸åŒï¼Œä»è€Œå¯¼è‡´çŠ¶æ€å’Œå‰¯ä½œç”¨ç®¡ç†çš„æ··ä¹±ã€‚

**è¯¦æƒ…å¯ä»¥æŸ¥çœ‹[React-hooks-not-magic-just-arrays](https://github.com/xiao-T/note/blob/master/Published/React-hooks-not-magic-just-arrays.md)**

### ä¸ºä»€ä¹ˆåªåœ¨å‡½æ•°ç»„ä»¶ä¸­è°ƒç”¨React Hooks?

- ç®€åŒ–ä»£ç ç»“æ„ï¼šHooks ä½¿å¾—å‡½æ•°ç»„ä»¶ä¹Ÿèƒ½ç®¡ç†çŠ¶æ€å’Œä½¿ç”¨ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼Œä»è€Œç®€åŒ–äº†ä»£ç ç»“æ„ã€‚
- æé«˜ä»£ç å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ï¼šHooks ä½¿å¾—çŠ¶æ€é€»è¾‘å¯ä»¥æ›´åŠ ç›´è§‚åœ°è¡¨è¾¾å’Œå¤ç”¨ã€‚
- ç¡®ä¿è°ƒç”¨é¡ºåºä¸€è‡´ï¼šHooks çš„è§„åˆ™ç¡®ä¿æ¯æ¬¡æ¸²æŸ“æ—¶çš„ Hooks è°ƒç”¨é¡ºåºä¸€è‡´ï¼Œä»è€Œæ­£ç¡®åœ°ç®¡ç†çŠ¶æ€å’Œå‰¯ä½œç”¨ã€‚

### Reactçš„åˆ—è¡¨ä¸ºä»€ä¹ˆéœ€è¦key?

åœ¨ React ä¸­ä½¿ç”¨ key å±æ€§æ˜¯ä¸ºäº†å¸®åŠ© React æ›´é«˜æ•ˆåœ°è¯†åˆ«å’Œæ›´æ–°åˆ—è¡¨ä¸­çš„å…ƒç´ ã€‚key å±æ€§æä¾›äº†ä¸€ä¸ªå”¯ä¸€çš„æ ‡è¯†ç¬¦ï¼Œä½¿å¾— React èƒ½å¤Ÿåœ¨å…ƒç´ å‘ç”Ÿå˜åŒ–æ—¶å‡†ç¡®åœ°è¿›è¡Œ DOM æ“ä½œï¼Œä»è€Œæé«˜æ¸²æŸ“æ€§èƒ½å’Œä¿æŒ UI çŠ¶æ€çš„ä¸€è‡´æ€§ã€‚é€‰æ‹©åˆé€‚çš„ keyï¼ˆé€šå¸¸æ˜¯å”¯ä¸€æ ‡è¯†ç¬¦ï¼‰å¯¹äºç¡®ä¿åˆ—è¡¨æ¸²æŸ“çš„ç¨³å®šæ€§å’Œæ€§èƒ½è‡³å…³é‡è¦ã€‚é¿å…ä½¿ç”¨æ•°ç»„ç´¢å¼•ä½œä¸º keyï¼Œé™¤éåˆ—è¡¨å…ƒç´ æ˜¯é™æ€ä¸”ä¸ä¼šé‡æ–°æ’åºæˆ–åˆ é™¤ã€‚

#### 1. key çš„ä½œç”¨

##### 1.1 å”¯ä¸€æ ‡è¯†å…ƒç´ 

key å±æ€§ä¸ºæ¯ä¸ªå…ƒç´ æä¾›äº†ä¸€ä¸ªå”¯ä¸€çš„æ ‡è¯†ç¬¦ï¼Œä½¿å¾— React èƒ½å¤Ÿå‡†ç¡®åœ°è¯†åˆ«å’Œè¿½è¸ªæ¯ä¸ªå…ƒç´ ã€‚å½“åˆ—è¡¨å‘ç”Ÿå˜åŒ–ï¼ˆä¾‹å¦‚å…ƒç´ çš„æ·»åŠ ã€åˆ é™¤æˆ–é‡æ–°æ’åºï¼‰æ—¶ï¼Œkey å¯ä»¥å¸®åŠ© React ç¡®å®šå“ªäº›å…ƒç´ éœ€è¦é‡æ–°æ¸²æŸ“ï¼Œå“ªäº›å…ƒç´ å¯ä»¥å¤ç”¨ã€‚

```jsx
const listItems = items.map((item) => (
  <li key={item.id}>{item.name}</li>
));
```

##### 1.2 æé«˜æ¸²æŸ“æ€§èƒ½

é€šè¿‡ä½¿ç”¨ key å±æ€§ï¼ŒReact å¯ä»¥æ›´åŠ é«˜æ•ˆåœ°è¿›è¡Œ DOM æ“ä½œã€‚React é€šè¿‡æ¯”è¾ƒå‰åä¸¤æ¬¡æ¸²æŸ“çš„ key å€¼ï¼Œæ¥åˆ¤æ–­å“ªäº›å…ƒç´ å‘ç”Ÿäº†å˜åŒ–ï¼Œä»è€Œåªæ›´æ–°é‚£äº›éœ€è¦æ›´æ–°çš„éƒ¨åˆ†ï¼Œè€Œä¸æ˜¯é‡æ–°æ¸²æŸ“æ•´ä¸ªåˆ—è¡¨ã€‚è¿™ç§ä¼˜åŒ–å¯ä»¥æ˜¾è‘—æé«˜åº”ç”¨çš„æ€§èƒ½ã€‚

#### 2. ä¸ºä»€ä¹ˆéœ€è¦å”¯ä¸€çš„ key

##### 2.1 ä¿æŒå…ƒç´ çš„ç¨³å®šæ€§ 

åœ¨æ²¡æœ‰ key æˆ– key ä¸å”¯ä¸€çš„æƒ…å†µä¸‹ï¼ŒReact å¯èƒ½ä¼šé”™è¯¯åœ°å¤ç”¨æˆ–åˆ é™¤å…ƒç´ ï¼Œå¯¼è‡´ UI çŠ¶æ€ä¸ä¸€è‡´æˆ–æ„å¤–è¡Œä¸ºã€‚ä¾‹å¦‚ï¼Œå¦‚æœåˆ—è¡¨ä¸­çš„å…ƒç´ æ²¡æœ‰å”¯ä¸€çš„ keyï¼ŒReact å¯èƒ½ä¼šåœ¨å…ƒç´ é‡æ–°æ’åºæ—¶é”™è¯¯åœ°å¤ç”¨æŸäº›å…ƒç´ ï¼Œå¯¼è‡´ç”¨æˆ·è¾“å…¥æˆ–ç»„ä»¶çŠ¶æ€ä¸¢å¤±ã€‚

```jsx
const listItems = items.map((item, index) => (
  <li key={index}>{item.name}</li>
));
```

åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œä½¿ç”¨æ•°ç»„ç´¢å¼•ä½œä¸º key æ˜¯ä¸æ¨èçš„ï¼Œå› ä¸ºæ•°ç»„å…ƒç´ çš„é¡ºåºå¯èƒ½ä¼šå˜åŒ–ï¼Œå¯¼è‡´ key ä¸å†å”¯ä¸€ï¼Œä»è€Œå¼•å‘ä¸Šè¿°é—®é¢˜ã€‚

#### 3. å¦‚ä½•é€‰æ‹©åˆé€‚çš„ key

##### 3.1 ä½¿ç”¨å”¯ä¸€æ ‡è¯†ç¬¦

æœ€ç†æƒ³çš„æƒ…å†µæ˜¯æ¯ä¸ªåˆ—è¡¨å…ƒç´ éƒ½æœ‰ä¸€ä¸ªå”¯ä¸€çš„æ ‡è¯†ç¬¦ï¼Œä¾‹å¦‚æ•°æ®åº“ä¸­çš„ ID æˆ–å…¶ä»–å”¯ä¸€å€¼ã€‚è¿™æ ·å¯ä»¥ç¡®ä¿ key çš„å”¯ä¸€æ€§å’Œç¨³å®šæ€§ã€‚

```jsx
const listItems = items.map((item) => (
  <li key={item.id}>{item.name}</li>
));
```

#### 3.2 é¿å…ä½¿ç”¨æ•°ç»„ç´¢å¼•

å°½é‡é¿å…ä½¿ç”¨æ•°ç»„ç´¢å¼•ä½œä¸º keyï¼Œå› ä¸ºæ•°ç»„å…ƒç´ çš„é¡ºåºå¯èƒ½ä¼šå˜åŒ–ï¼Œå¯¼è‡´ key ä¸å†å”¯ä¸€ï¼Œä»è€Œå¼•å‘æ¸²æŸ“é—®é¢˜ã€‚åªæœ‰åœ¨åˆ—è¡¨å…ƒç´ æ˜¯é™æ€çš„ï¼Œä¸”ä¸ä¼šé‡æ–°æ’åºæˆ–åˆ é™¤çš„æƒ…å†µä¸‹ï¼Œæ‰å¯ä»¥è€ƒè™‘ä½¿ç”¨æ•°ç»„ç´¢å¼•ã€‚

### ä¸ºä»€ä¹ˆå¤§éƒ¨åˆ†JSXçš„å±æ€§åéƒ½æ˜¯é©¼å³°å¼å‘½åï¼Ÿ

åœ¨ JSXï¼ˆJavaScript XMLï¼‰ä¸­ï¼Œå¤§éƒ¨åˆ†å±æ€§åä½¿ç”¨é©¼å³°å¼å‘½åï¼ˆcamelCaseï¼‰æ˜¯æœ‰å¤šæ–¹é¢åŸå› çš„ï¼Œä¸»è¦åŒ…æ‹¬ä¸ JavaScript è¯­è¨€çš„é£æ ¼ä¸€è‡´æ€§ã€é¿å…ä¸ HTML å±æ€§å†²çªä»¥åŠæé«˜ä»£ç å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ç­‰ã€‚

#### 1. ä¸ JavaScript é£æ ¼ä¸€è‡´

JavaScript è¯­è¨€æœ¬èº«çš„å˜é‡å’Œå‡½æ•°å‘½åè§„èŒƒé€šå¸¸ä½¿ç”¨é©¼å³°å¼å‘½åã€‚ä¸ºäº†ä¿æŒä¸€è‡´æ€§ï¼ŒJSX å±æ€§ä¹Ÿé‡‡ç”¨äº†ç›¸åŒçš„å‘½åé£æ ¼ã€‚è¿™ä½¿å¾—å¼€å‘è€…åœ¨ç¼–å†™ä»£ç æ—¶ä¸éœ€è¦åœ¨ä¸åŒçš„å‘½åé£æ ¼ä¹‹é—´åˆ‡æ¢ï¼Œä»è€Œæé«˜äº†ä»£ç çš„ä¸€è‡´æ€§å’Œå¯è¯»æ€§ã€‚

```js
const myVariable = 'value';
const myFunction = () => {};
```

#### 2. é¿å…ä¸ HTML å±æ€§å†²çª

JSX æ˜¯ JavaScript å’Œ HTML çš„ç»“åˆä½“ï¼Œä½†å®ƒå®é™…ä¸Šæ˜¯ JavaScript çš„è¯­æ³•æ‰©å±•ã€‚å› æ­¤ï¼ŒJSX å±æ€§éœ€è¦é¿å…ä¸åŸç”Ÿ HTML å±æ€§å‘ç”Ÿå†²çªã€‚é€šè¿‡ä½¿ç”¨é©¼å³°å¼å‘½åï¼Œå¯ä»¥æœ‰æ•ˆåœ°é¿å…è¿™ç§å†²çªã€‚

ä¾‹å¦‚ï¼ŒHTML ä¸­çš„ class å±æ€§åœ¨ JSX ä¸­è¢«å†™ä½œ classNameï¼Œå› ä¸º class æ˜¯ JavaScript çš„ä¿ç•™å­—ã€‚

```jsx
// HTML
<div class="my-class"></div>

// JSX
<div className="my-class"></div>
```

#### 3. æé«˜ä»£ç å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§

é©¼å³°å¼å‘½åæœ‰åŠ©äºæé«˜ä»£ç çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚å®ƒä½¿å¾—å±æ€§ååœ¨è§†è§‰ä¸Šæ›´å®¹æ˜“åŒºåˆ†å’Œç†è§£ï¼Œç‰¹åˆ«æ˜¯åœ¨é•¿å±æ€§åçš„æƒ…å†µä¸‹ã€‚

```jsx
// é©¼å³°å¼å‘½å
const element = <input type="text" autoComplete="off" />;

// éé©¼å³°å¼å‘½åï¼ˆä¸æ¨èï¼‰
const element = <input type="text" autocomplete="off" />;
```

#### 4. ä¸ React å†…éƒ¨å®ç°ä¸€è‡´

React å†…éƒ¨ä½¿ç”¨ JavaScript å¯¹è±¡æ¥è¡¨ç¤ºç»„ä»¶çš„å±æ€§å’ŒçŠ¶æ€ï¼Œè€Œ JavaScript å¯¹è±¡çš„å±æ€§åé€šå¸¸ä½¿ç”¨é©¼å³°å¼å‘½åã€‚ä¸ºäº†ä¸ React å†…éƒ¨å®ç°ä¿æŒä¸€è‡´ï¼ŒJSX å±æ€§ä¹Ÿé‡‡ç”¨äº†é©¼å³°å¼å‘½åã€‚

```js
const element = React.createElement('input', { type: 'text', autoComplete: 'off' });
```

### ä¸€ä¸ªæ–‡ä»¶åªå¯¼å‡ºä¸€ä¸ªç»„ä»¶å¥½è¿˜æ˜¯ä¸€ä¸ªæ–‡ä»¶å¯¼å‡ºå¤šä¸ªç»„ä»¶å¥½ï¼Ÿ

#### æ€»ç»“

**æ ¹æ®ç»„ä»¶çš„ç›¸å…³æ€§**

- é«˜ç›¸å…³æ€§ï¼šå¦‚æœå¤šä¸ªç»„ä»¶ä¹‹é—´é«˜åº¦ç›¸å…³ä¸”é€šå¸¸ä¸€èµ·ä½¿ç”¨ï¼Œå¯ä»¥è€ƒè™‘å°†å®ƒä»¬æ”¾åœ¨åŒä¸€ä¸ªæ–‡ä»¶ä¸­ã€‚
- ä½ç›¸å…³æ€§ï¼šå¦‚æœç»„ä»¶ä¹‹é—´çš„ç›¸å…³æ€§è¾ƒä½ï¼Œæˆ–è€…ç»„ä»¶è¾ƒå¤§ï¼Œå»ºè®®å°†å®ƒä»¬åˆ†å¼€åˆ°ä¸åŒçš„æ–‡ä»¶ä¸­ã€‚

**ä»£ç å¯ç»´æŠ¤æ€§**

- å•ä¸€èŒè´£åŸåˆ™ï¼šæ¯ä¸ªæ–‡ä»¶åªåŒ…å«ä¸€ä¸ªç»„ä»¶ï¼Œæ›´ç¬¦åˆå•ä¸€èŒè´£åŸåˆ™ï¼Œä¾¿äºç®¡ç†å’Œç»´æŠ¤ã€‚
- æ–‡ä»¶å¤§å°å’Œå¤æ‚åº¦ï¼šé¿å…æ–‡ä»¶è¿‡å¤§å’Œè¿‡äºå¤æ‚ï¼Œä¿æŒä»£ç çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚

**å›¢é˜Ÿè§„èŒƒå’Œé¡¹ç›®è§„æ¨¡**

- å°å‹é¡¹ç›®ï¼šåœ¨å°å‹é¡¹ç›®ä¸­ï¼Œä¸€ä¸ªæ–‡ä»¶å¯¼å‡ºå¤šä¸ªç»„ä»¶å¯èƒ½æ›´æ–¹ä¾¿ç®¡ç†ã€‚
- å¤§å‹é¡¹ç›®ï¼šåœ¨å¤§å‹é¡¹ç›®ä¸­ï¼Œä¸€ä¸ªæ–‡ä»¶å¯¼å‡ºä¸€ä¸ªç»„ä»¶æ›´æœ‰åŠ©äºä¿æŒä»£ç ç»“æ„çš„æ¸…æ™°å’Œä¸€è‡´ã€‚

#### ä¸€ä¸ªæ–‡ä»¶å¯¼å‡ºä¸€ä¸ªç»„ä»¶ï¼ˆæ¨èï¼‰

**ä¼˜ç‚¹**

- æ¸…æ™°çš„æ–‡ä»¶ç»“æ„ï¼šæ¯ä¸ªæ–‡ä»¶åªåŒ…å«ä¸€ä¸ªç»„ä»¶ï¼Œæ–‡ä»¶åä¸ç»„ä»¶åä¸€è‡´ï¼Œå®¹æ˜“æŸ¥æ‰¾å’Œç†è§£ã€‚
- æ¨¡å—åŒ–ï¼šç»„ä»¶çš„èŒè´£å•ä¸€ï¼Œä¾¿äºç®¡ç†å’Œç»´æŠ¤ã€‚
- æ˜“äºé‡ç”¨ï¼šç»„ä»¶å¯ä»¥ç‹¬ç«‹äºå…¶ä»–ç»„ä»¶è¿›è¡Œé‡ç”¨å’Œæµ‹è¯•ã€‚
- å‡å°‘åˆå¹¶å†²çªï¼šåœ¨å¤šäººåä½œæ—¶ï¼Œå‡å°‘äº†ä»£ç åˆå¹¶å†²çªçš„å¯èƒ½æ€§ã€‚

**ç¼ºç‚¹**

- æ–‡ä»¶æ•°é‡å¤šï¼šé¡¹ç›®æ–‡ä»¶æ•°é‡å¯èƒ½ä¼šå¢åŠ ï¼Œå°¤å…¶æ˜¯åœ¨å¤§å‹é¡¹ç›®ä¸­ã€‚
- å¯èƒ½å¯¼è‡´æ–‡ä»¶å¤¹å±‚çº§è¾ƒæ·±ï¼šä¸ºäº†ç»„ç»‡æ–‡ä»¶ï¼Œå¯èƒ½éœ€è¦åˆ›å»ºæ›´å¤šçš„æ–‡ä»¶å¤¹ã€‚

```jsx
// components/Button.js
import React from 'react';

const Button = (props) => {
  return <button>{props.label}</button>;
};

export default Button;

// components/Input.js
import React from 'react';

const Input = (props) => {
  return <input type="text" value={props.value} onChange={props.onChange} />;
};

export default Input;
```

#### ä¸€ä¸ªæ–‡ä»¶å¯¼å‡ºå¤šä¸ªç»„ä»¶

**ä¼˜ç‚¹**

- å‡å°‘æ–‡ä»¶æ•°é‡ï¼šå¤šä¸ªç›¸å…³ç»„ä»¶å¯ä»¥æ”¾åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œå‡å°‘æ–‡ä»¶æ•°é‡ã€‚
- æ–¹ä¾¿ç®¡ç†ç›¸å…³ç»„ä»¶ï¼šç›¸å…³æ€§å¾ˆå¼ºçš„å°ç»„ä»¶å¯ä»¥æ”¾åœ¨ä¸€èµ·ï¼Œä¾¿äºç®¡ç†å’Œç»´æŠ¤ã€‚

**ç¼ºç‚¹**

- æ–‡ä»¶å†…å®¹å¤æ‚ï¼šæ–‡ä»¶å†…å®¹å¯èƒ½å˜å¾—å¤æ‚ï¼Œéš¾ä»¥é˜…è¯»å’Œç»´æŠ¤ã€‚
- éš¾ä»¥é‡ç”¨ï¼šå¦‚æœç»„ä»¶ä¹‹é—´çš„è€¦åˆåº¦é«˜ï¼Œå¯èƒ½ä¼šå½±å“ç»„ä»¶çš„é‡ç”¨æ€§ã€‚
- åˆå¹¶å†²çªï¼šå¤šäººåä½œæ—¶ï¼Œå¤šä¸ªç»„ä»¶åœ¨åŒä¸€ä¸ªæ–‡ä»¶ä¸­å¯èƒ½ä¼šå¢åŠ åˆå¹¶å†²çªçš„é£é™©ã€‚

```jsx
// components/FormElements.js
import React from 'react';

export const Button = (props) => {
  return <button>{props.label}</button>;
};

export const Input = (props) => {
  return <input type="text" value={props.value} onChange={props.onChange} />;
};
```

### å‡½æ•°å¼ç»„ä»¶ä½¿ç”¨å‡½æ•°å£°æ˜å¥½è¿˜æ˜¯ä½¿ç”¨å‡½æ•°è¡¨è¾¾å¼ï¼Ÿ

#### ç»“è®º

- å‡½æ•°å£°æ˜ï¼šè¯­æ³•ç®€æ´ï¼Œæ”¯æŒæå‡ï¼Œé€‚ç”¨äºç®€å•ç»„ä»¶å’Œä¸ªäººåå¥½ã€‚
- å‡½æ•°è¡¨è¾¾å¼ï¼šæ›´çµæ´»ï¼Œæ”¯æŒç®­å¤´å‡½æ•°å’Œä¸€è‡´çš„ä»£ç é£æ ¼ï¼Œé€‚ç”¨äºå¤æ‚ç»„ä»¶å’Œç°ä»£ JavaScript é¡¹ç›®ã€‚

åœ¨ React é¡¹ç›®ä¸­ï¼Œé€‰æ‹©ä½¿ç”¨å‡½æ•°å£°æ˜è¿˜æ˜¯å‡½æ•°è¡¨è¾¾å¼å®šä¹‰å‡½æ•°å¼ç»„ä»¶ä¸»è¦å–å†³äºå›¢é˜Ÿçš„ä»£ç é£æ ¼å’Œä¸€è‡´æ€§è¦æ±‚ã€‚æ— è®ºé€‰æ‹©å“ªç§æ–¹å¼ï¼Œä¿æŒä»£ç é£æ ¼çš„ä¸€è‡´æ€§å’Œå¯è¯»æ€§æ˜¯æœ€é‡è¦çš„ã€‚

**ç®€å•ç»„ä»¶ vs. å¤æ‚ç»„ä»¶**

- ç®€å•ç»„ä»¶ï¼šå¯¹äºç®€å•çš„å±•ç¤ºç»„ä»¶ï¼Œå‡½æ•°å£°æ˜å’Œå‡½æ•°è¡¨è¾¾å¼éƒ½å¯ä»¥ä½¿ç”¨ï¼Œé€‰æ‹©å“ªç§æ–¹å¼ä¸»è¦å–å†³äºä¸ªäººæˆ–å›¢é˜Ÿçš„åå¥½ã€‚
- å¤æ‚ç»„ä»¶ï¼šå¯¹äºåŒ…å«å¤æ‚é€»è¾‘å’ŒçŠ¶æ€ç®¡ç†çš„ç»„ä»¶ï¼Œå‡½æ•°è¡¨è¾¾å¼ï¼ˆç‰¹åˆ«æ˜¯ç®­å¤´å‡½æ•°ï¼‰å¯èƒ½æ›´çµæ´»å’Œæ–¹ä¾¿ã€‚


Airbnb çš„ React/JSX é£æ ¼æŒ‡å—**æ¨èä½¿ç”¨å‡½æ•°è¡¨è¾¾å¼æ¥å®šä¹‰å‡½æ•°å¼ç»„ä»¶**ï¼Œç‰¹åˆ«æ˜¯ç®­å¤´å‡½æ•°ã€‚è¿™æœ‰åŠ©äºä¿æŒä»£ç é£æ ¼çš„ä¸€è‡´æ€§ï¼Œç‰¹åˆ«æ˜¯åœ¨ç°ä»£ JavaScript é¡¹ç›®ä¸­ã€‚

#### å‡½æ•°å£°æ˜ï¼ˆFunction Declarationï¼‰

```jsx
function MyComponent(props) {
  return <div>Hello, {props.name}!</div>;
}
```

**ä¼˜ç‚¹**

- æå‡ï¼ˆHoistingï¼‰ï¼šå‡½æ•°å£°æ˜ä¼šè¢«æå‡åˆ°ä½œç”¨åŸŸçš„é¡¶éƒ¨ï¼Œè¿™æ„å‘³ç€ä½ å¯ä»¥åœ¨å®šä¹‰ä¹‹å‰ä½¿ç”¨å®ƒä»¬ã€‚
- è¯­æ³•ç®€æ´ï¼šå‡½æ•°å£°æ˜çš„è¯­æ³•ç›¸å¯¹ç®€æ´æ˜äº†ï¼Œå®¹æ˜“ç†è§£ã€‚

**ç¼ºç‚¹**

- ä¸€è‡´æ€§é—®é¢˜ï¼šå¦‚æœé¡¹ç›®ä¸­æœ‰å¤§é‡çš„å‡½æ•°è¡¨è¾¾å¼ï¼ˆä¾‹å¦‚ï¼Œç®­å¤´å‡½æ•°ï¼‰ï¼Œä½¿ç”¨å‡½æ•°å£°æ˜å¯èƒ½ä¼šå¯¼è‡´ä»£ç é£æ ¼ä¸ä¸€è‡´ã€‚
- ä¸é€‚åˆå¤æ‚é€»è¾‘ï¼šåœ¨åŒ…å«å¤æ‚é€»è¾‘å’ŒçŠ¶æ€ç®¡ç†çš„ç»„ä»¶ä¸­ï¼Œå‡½æ•°å£°æ˜å¯èƒ½ä¸å¦‚å‡½æ•°è¡¨è¾¾å¼çµæ´»ã€‚

#### å‡½æ•°è¡¨è¾¾å¼ï¼ˆFunction Expressionï¼‰[æ¨è]

```jsx
const MyComponent = (props) => {
  return <div>Hello, {props.name}!</div>;
};
```

**ä¼˜ç‚¹**

- ä¸€è‡´æ€§ï¼šå¦‚æœä½ åœ¨é¡¹ç›®ä¸­å¹¿æ³›ä½¿ç”¨ç®­å¤´å‡½æ•°å’Œå‡½æ•°è¡¨è¾¾å¼ï¼Œé‚£ä¹ˆä½¿ç”¨å‡½æ•°è¡¨è¾¾å¼å®šä¹‰ç»„ä»¶å¯ä»¥ä¿æŒä»£ç é£æ ¼çš„ä¸€è‡´æ€§ã€‚
- ç®€æ´çš„ç»‘å®šï¼šç®­å¤´å‡½æ•°è‡ªåŠ¨ç»‘å®š thisï¼Œè™½ç„¶åœ¨å‡½æ•°å¼ç»„ä»¶ä¸­ this å¹¶ä¸å¸¸ç”¨ï¼Œä½†åœ¨æŸäº›æƒ…å†µä¸‹ä½¿ç”¨ç®­å¤´å‡½æ•°å®šä¹‰ç»„ä»¶å¯èƒ½æ›´ç®€æ´ã€‚
- æ›´çµæ´»çš„å®šä¹‰ï¼šå‡½æ•°è¡¨è¾¾å¼å¯ä»¥æ›´çµæ´»åœ°å®šä¹‰å’Œä½¿ç”¨ï¼Œæ¯”å¦‚åœ¨æ¡ä»¶è¯­å¥ã€å›è°ƒå‡½æ•°å’Œé—­åŒ…ä¸­ã€‚

**ç¼ºç‚¹**

- æ²¡æœ‰æå‡ï¼ˆNo Hoistingï¼‰ï¼šå‡½æ•°è¡¨è¾¾å¼ä¸ä¼šè¢«æå‡ï¼Œå› æ­¤å¿…é¡»åœ¨å®šä¹‰ä¹‹åæ‰èƒ½ä½¿ç”¨ã€‚
- è¯­æ³•ç¨å¤æ‚ï¼šå¯¹äºæ–°æ‰‹æ¥è¯´ï¼Œç®­å¤´å‡½æ•°çš„è¯­æ³•å¯èƒ½ä¸å¦‚å‡½æ•°å£°æ˜ç›´è§‚ã€‚


### ä¸ºä»€ä¹ˆå­ç»„ä»¶ä¸èƒ½å®šä¹‰åœ¨çˆ¶ç»„ä»¶çš„å†…éƒ¨ï¼Ÿ

#### é—®é¢˜åœºæ™¯

å­ç»„ä»¶ç›´æ¥å®šä¹‰åœ¨çˆ¶ç»„ä»¶å†…éƒ¨ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š

```tsx
export default function Gallery() {
  // ğŸ”´ æ°¸è¿œä¸è¦åœ¨ç»„ä»¶ä¸­å®šä¹‰ç»„ä»¶
  function Profile() {
    // ...
  }
  // ...
}
```

é€šå¸¸éœ€è¦æŒ‰ç…§ä¸‹é¢çš„å®šä¹‰å’Œä½¿ç”¨ï¼š

```tsx
export default function Gallery() {
  // ...
}

// âœ… åœ¨é¡¶å±‚å£°æ˜ç»„ä»¶
function Profile() {
  // ...
}
```

#### å›ç­”

å°†å­ç»„ä»¶å®šä¹‰åœ¨çˆ¶ç»„ä»¶å†…éƒ¨è™½ç„¶åœ¨æŸäº›æƒ…å†µä¸‹æ˜¯å¯è¡Œçš„ï¼Œä½†é€šå¸¸ä¸æ¨èè¿™æ ·åšã€‚ä¸»è¦åŸå› åŒ…æ‹¬æ€§èƒ½é—®é¢˜ã€ä»£ç å¯è¯»æ€§å’Œç»´æŠ¤æ€§ï¼Œä»¥åŠç»„ä»¶çš„é‡ç”¨æ€§ã€‚æ¨èå°†å­ç»„ä»¶å®šä¹‰åœ¨çˆ¶ç»„ä»¶å¤–éƒ¨ï¼Œé€šå¸¸æ˜¯åœ¨å•ç‹¬çš„æ–‡ä»¶ä¸­ã€‚å¦‚æœç¡®å®éœ€è¦åœ¨çˆ¶ç»„ä»¶å†…éƒ¨å®šä¹‰å­ç»„ä»¶ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨ useMemo æˆ– useCallback æ¥ç¼“å­˜å­ç»„ä»¶ï¼Œä»è€Œé¿å…ä¸å¿…è¦çš„æ€§èƒ½å¼€é”€ã€‚

##### 1. æ€§èƒ½é—®é¢˜

**æ¯æ¬¡æ¸²æŸ“éƒ½ä¼šé‡æ–°å®šä¹‰å­ç»„ä»¶**

å½“ä½ åœ¨çˆ¶ç»„ä»¶çš„å‡½æ•°ä½“å†…å®šä¹‰å­ç»„ä»¶æ—¶ï¼Œæ¯æ¬¡çˆ¶ç»„ä»¶é‡æ–°æ¸²æŸ“æ—¶ï¼Œå­ç»„ä»¶ä¹Ÿä¼šè¢«é‡æ–°å®šä¹‰ã€‚è¿™ä¼šå¯¼è‡´å­ç»„ä»¶çš„é‡æ–°åˆ›å»ºå’Œé‡æ–°æ¸²æŸ“ï¼Œå³ä½¿å­ç»„ä»¶çš„ props æˆ– state æ²¡æœ‰å˜åŒ–ã€‚

```jsx
const ParentComponent = () => {
  const [count, setCount] = useState(0);

  const handleClick = () => {
    setCount(count + 1);
  };

  // å­ç»„ä»¶å®šä¹‰åœ¨çˆ¶ç»„ä»¶å†…éƒ¨
  const ChildComponent = () => {
    console.log('ChildComponent rendered');
    return <div>Child Component</div>;
  };

  return (
    <div>
      <button onClick={handleClick}>Increment</button>
      <ChildComponent />
    </div>
  );
};
```

åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œæ¯æ¬¡ç‚¹å‡»æŒ‰é’®å¯¼è‡´ ParentComponent é‡æ–°æ¸²æŸ“ï¼ŒChildComponent ä¹Ÿä¼šè¢«é‡æ–°å®šä¹‰å’Œæ¸²æŸ“ã€‚å³ä½¿ ChildComponent æœ¬èº«æ²¡æœ‰ä»»ä½•å˜åŒ–ï¼Œå®ƒè¿˜æ˜¯ä¼šé‡æ–°æ¸²æŸ“ï¼Œå¯¼è‡´ä¸å¿…è¦çš„æ€§èƒ½å¼€é”€ã€‚

##### 2. ä»£ç å¯è¯»æ€§å’Œç»´æŠ¤æ€§

**éš¾ä»¥é˜…è¯»å’Œç†è§£**

å°†å­ç»„ä»¶å®šä¹‰åœ¨çˆ¶ç»„ä»¶å†…éƒ¨ä¼šå¢åŠ ä»£ç çš„å¤æ‚æ€§å’Œéš¾ä»¥é˜…è¯»ã€‚ç‰¹åˆ«æ˜¯åœ¨å¤§å‹åº”ç”¨ä¸­ï¼Œè¿™ç§åšæ³•ä¼šå¯¼è‡´ä»£ç ç»“æ„æ··ä¹±ï¼Œéš¾ä»¥ç»´æŠ¤ã€‚

```jsx
const ParentComponent = () => {
  // å­ç»„ä»¶å®šä¹‰åœ¨çˆ¶ç»„ä»¶å†…éƒ¨
  const ChildComponent = () => {
    return <div>Child Component</div>;
  };

  return (
    <div>
      <ChildComponent />
    </div>
  );
};
```
ç›¸æ¯”ä¹‹ä¸‹ï¼Œå°†å­ç»„ä»¶å®šä¹‰åœ¨ç‹¬ç«‹çš„æ–‡ä»¶ä¸­ï¼Œå¯ä»¥ä½¿ä»£ç æ›´åŠ æ¨¡å—åŒ–å’Œæ˜“è¯»ï¼š

```jsx
// ChildComponent.js
const ChildComponent = () => {
  return <div>Child Component</div>;
};

export default ChildComponent;

// ParentComponent.js
import ChildComponent from './ChildComponent';

const ParentComponent = () => {
  return (
    <div>
      <ChildComponent />
    </div>
  );
};

export default ParentComponent;
```

##### 3. ç»„ä»¶çš„é‡ç”¨æ€§

**éš¾ä»¥é‡ç”¨**

å°†å­ç»„ä»¶å®šä¹‰åœ¨çˆ¶ç»„ä»¶å†…éƒ¨ä¼šé™åˆ¶å­ç»„ä»¶çš„é‡ç”¨æ€§ã€‚å¦‚æœå­ç»„ä»¶å®šä¹‰åœ¨çˆ¶ç»„ä»¶å†…éƒ¨ï¼Œé‚£ä¹ˆå®ƒåªèƒ½åœ¨è¿™ä¸ªçˆ¶ç»„ä»¶ä¸­ä½¿ç”¨ï¼Œæ— æ³•åœ¨å…¶ä»–åœ°æ–¹è½»æ¾é‡ç”¨ã€‚

```jsx
const ParentComponent = () => {
  // å­ç»„ä»¶å®šä¹‰åœ¨çˆ¶ç»„ä»¶å†…éƒ¨
  const ChildComponent = () => {
    return <div>Child Component</div>;
  };

  return (
    <div>
      <ChildComponent />
    </div>
  );
};
```
ç›¸æ¯”ä¹‹ä¸‹ï¼Œå°†å­ç»„ä»¶å®šä¹‰åœ¨ç‹¬ç«‹çš„æ–‡ä»¶ä¸­ï¼Œå¯ä»¥è½»æ¾åœ¨å¤šä¸ªçˆ¶ç»„ä»¶ä¸­é‡ç”¨ï¼š

```jsx
// ChildComponent.js
const ChildComponent = () => {
  return <div>Child Component</div>;
};

export default ChildComponent;

// ParentComponent1.js
import ChildComponent from './ChildComponent';

const ParentComponent1 = () => {
  return (
    <div>
      <ChildComponent />
    </div>
  );
};

export default ParentComponent1;

// ParentComponent2.js
import ChildComponent from './ChildComponent';

const ParentComponent2 = () => {
  return (
    <div>
      <ChildComponent />
    </div>
  );
};

export default ParentComponent2;
```

#### æœ€ä½³å®è·µ

**å°†å­ç»„ä»¶å®šä¹‰åœ¨çˆ¶ç»„ä»¶å¤–éƒ¨**

æœ€ç®€å•çš„è§£å†³æ–¹æ¡ˆæ˜¯å°†å­ç»„ä»¶å®šä¹‰åœ¨çˆ¶ç»„ä»¶çš„å¤–éƒ¨ï¼Œé€šå¸¸æ˜¯åœ¨å•ç‹¬çš„æ–‡ä»¶ä¸­ã€‚è¿™ä¸ä»…æœ‰åŠ©äºæ€§èƒ½ä¼˜åŒ–ï¼Œè¿˜èƒ½æé«˜ä»£ç çš„å¯è¯»æ€§å’Œé‡ç”¨æ€§ã€‚

**ä½¿ç”¨`useMemo`æˆ–`useCallback`**

å¦‚æœç¡®å®éœ€è¦åœ¨çˆ¶ç»„ä»¶å†…éƒ¨å®šä¹‰å­ç»„ä»¶ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨ useMemo æˆ– useCallback æ¥ç¼“å­˜å­ç»„ä»¶ï¼Œä»è€Œé¿å…æ¯æ¬¡æ¸²æŸ“æ—¶é‡æ–°åˆ›å»ºå­ç»„ä»¶ã€‚

```jsx
import React, { useState, useMemo } from 'react';

const ParentComponent = () => {
  const [count, setCount] = useState(0);

  const handleClick = () => {
    setCount(count + 1);
  };

  // ä½¿ç”¨ useMemo ç¼“å­˜å­ç»„ä»¶
  const ChildComponent = useMemo(() => {
    return () => {
      console.log('ChildComponent rendered');
      return <div>Child Component</div>;
    };
  }, []);

  return (
    <div>
      <button onClick={handleClick}>Increment</button>
      <ChildComponent />
    </div>
  );
};

export default ParentComponent;
```

## å‚è€ƒèµ„æ–™

- [React-hooks-not-magic-just-arrays](https://github.com/xiao-T/note/blob/master/Published/React-hooks-not-magic-just-arrays.md)